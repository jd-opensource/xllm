diff --git a/CMakeLists.txt b/CMakeLists.txt
index 047ae3e..b4ae201 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -16,7 +16,7 @@ option(WITH_STORE "build mooncake store library and sample code" ON)
 option(WITH_P2P_STORE "build p2p store library and sample code" OFF)
 option(WITH_RUST_EXAMPLE "build the Rust interface and sample code for the transfer engine" OFF)
 
-add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/extern/pybind11)
+#add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/extern/pybind11)
 set(PYTHON_EXECUTABLE "python3")
 execute_process(
     COMMAND ${PYTHON_EXECUTABLE} -c "import sys; print(sys.path[-1])"
diff --git a/mooncake-store/CMakeLists.txt b/mooncake-store/CMakeLists.txt
index 8483085..9d263dd 100644
--- a/mooncake-store/CMakeLists.txt
+++ b/mooncake-store/CMakeLists.txt
@@ -20,5 +20,7 @@ include_directories(
 
 # Add subdirectories
 add_subdirectory(src)
-add_subdirectory(tests)
+if (BUILD_UNIT_TESTS)
+  add_subdirectory(tests)
+endif()
 add_subdirectory(benchmarks)
\ No newline at end of file
diff --git a/mooncake-store/include/offset_allocator/offset_allocator.hpp b/mooncake-store/include/offset_allocator/offset_allocator.hpp
index fde978b..ac54f8c 100644
--- a/mooncake-store/include/offset_allocator/offset_allocator.hpp
+++ b/mooncake-store/include/offset_allocator/offset_allocator.hpp
@@ -6,7 +6,7 @@
 #include <optional>
 #include <glog/logging.h>
 
-#include "mutex.h"
+#include "../mutex.h"
 
 namespace mooncake::offset_allocator {
 typedef unsigned char uint8;
diff --git a/mooncake-store/include/storage_backend.h b/mooncake-store/include/storage_backend.h
index a30f0c6..3bfeffb 100644
--- a/mooncake-store/include/storage_backend.h
+++ b/mooncake-store/include/storage_backend.h
@@ -4,8 +4,8 @@
 #include <vector>
 #include <mutex>
 #include <fstream>
-#include <types.h>
-#include <file_interface.h>
+#include "types.h"
+#include "file_interface.h"
 #include <filesystem>
 #include <thread>
 #include <chrono>
diff --git a/mooncake-store/include/types.h b/mooncake-store/include/types.h
index d2830a3..39c3b27 100644
--- a/mooncake-store/include/types.h
+++ b/mooncake-store/include/types.h
@@ -10,8 +10,11 @@
 #include <variant>
 #include <vector>
 
-#include "Slab.h"
+#include "cachelib_memory_allocator/Slab.h"
 #include "allocator.h"
+namespace iguana {
+using std::contiguous_iterator;
+}
 #include "ylt/struct_json/json_reader.h"
 #include "ylt/struct_json/json_writer.h"
 
diff --git a/mooncake-store/src/ha_helper.cpp b/mooncake-store/src/ha_helper.cpp
index c1f4ded..e4b982b 100644
--- a/mooncake-store/src/ha_helper.cpp
+++ b/mooncake-store/src/ha_helper.cpp
@@ -1,3 +1,6 @@
+#pragma GCC push_options
+#pragma GCC optimize("O0")
+
 #include "ha_helper.h"
 #include "etcd_helper.h"
 #include "rpc_service.h"
@@ -169,4 +172,6 @@ MasterServiceSupervisor::~MasterServiceSupervisor() {
     }
 }
 
-}  // namespace mooncake
\ No newline at end of file
+}  // namespace mooncake
+
+#pragma GCC pop_options
\ No newline at end of file
diff --git a/mooncake-store/src/rpc_service.cpp b/mooncake-store/src/rpc_service.cpp
index f515671..7a019b6 100644
--- a/mooncake-store/src/rpc_service.cpp
+++ b/mooncake-store/src/rpc_service.cpp
@@ -1,3 +1,6 @@
+#pragma GCC push_options
+#pragma GCC optimize("O0")
+
 #include "rpc_service.h"
 
 #include <ylt/struct_json/json_reader.h>
@@ -571,4 +574,6 @@ void RegisterRpcService(
         &wrapped_master_service);
 }
 
-}  // namespace mooncake
\ No newline at end of file
+}  // namespace mooncake
+
+#pragma GCC pop_options
\ No newline at end of file
diff --git a/mooncake-store/src/utils.cpp b/mooncake-store/src/utils.cpp
index b775851..736d61d 100644
--- a/mooncake-store/src/utils.cpp
+++ b/mooncake-store/src/utils.cpp
@@ -1,6 +1,6 @@
 #include "utils.h"
 
-#include <Slab.h>
+#include "cachelib_memory_allocator/Slab.h"
 #include <glog/logging.h>
 #include <netinet/in.h>
 #include <sys/socket.h>
diff --git a/mooncake-store/tests/CMakeLists.txt b/mooncake-store/tests/CMakeLists.txt
index 421ed47..fc6f598 100644
--- a/mooncake-store/tests/CMakeLists.txt
+++ b/mooncake-store/tests/CMakeLists.txt
@@ -106,8 +106,8 @@ target_link_libraries(offset_allocator_test PUBLIC
 )
 add_test(NAME offset_allocator_test COMMAND offset_allocator_test)
 
-add_executable(utils_test utils_test.cpp)
-target_link_libraries(utils_test PUBLIC
+add_executable(mc_utils_test utils_test.cpp)
+target_link_libraries(mc_utils_test PUBLIC
     mooncake_store
     cachelib_memory_allocator
     glog
@@ -115,7 +115,7 @@ target_link_libraries(utils_test PUBLIC
     gtest_main
     pthread
 )
-add_test(NAME utils_test COMMAND utils_test)
+add_test(NAME mc_utils_test COMMAND mc_utils_test)
 
 add_executable(client_buffer_test client_buffer_test.cpp)
 target_link_libraries(client_buffer_test PUBLIC
diff --git a/mooncake-transfer-engine/src/common/base/CMakeLists.txt b/mooncake-transfer-engine/src/common/base/CMakeLists.txt
index de7e35d..5d44865 100644
--- a/mooncake-transfer-engine/src/common/base/CMakeLists.txt
+++ b/mooncake-transfer-engine/src/common/base/CMakeLists.txt
@@ -9,4 +9,5 @@ list(
   ${CMAKE_CURRENT_LIST_DIR}/status.cpp)
 
 # # Build all the source files of base dir into a static lib('base')
-add_library(base STATIC ${SRC})
\ No newline at end of file
+add_library(base STATIC ${SRC})
+target_link_libraries(base PRIVATE glog::glog)
\ No newline at end of file
diff --git a/mooncake-transfer-engine/src/transport/tcp_transport/CMakeLists.txt b/mooncake-transfer-engine/src/transport/tcp_transport/CMakeLists.txt
index 23fa1b4..7c6a0f0 100644
--- a/mooncake-transfer-engine/src/transport/tcp_transport/CMakeLists.txt
+++ b/mooncake-transfer-engine/src/transport/tcp_transport/CMakeLists.txt
@@ -1,4 +1,4 @@
 file(GLOB TCP_SOURCES "*.cpp")
 
 add_library(tcp_transport OBJECT ${TCP_SOURCES})
-target_link_libraries(tcp_transport PRIVATE JsonCpp::JsonCpp yalantinglibs::yalantinglibs)
+target_link_libraries(tcp_transport PRIVATE JsonCpp::JsonCpp glog::glog yalantinglibs::yalantinglibs)
